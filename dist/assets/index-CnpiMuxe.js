import{r,j as x,E as X,a as M,l as Z,R as E,k as j}from"./index-C_HiF49y.js";import{P as G}from"./index-Biiv9KAF.js";function T(e,t,{checkForDefaultPrevented:o=!0}={}){return function(c){if(e==null||e(c),o===!1||!c.defaultPrevented)return t==null?void 0:t(c)}}function be(e,t){const o=r.createContext(t);function n(i){const{children:l,...f}=i,a=r.useMemo(()=>f,Object.values(f));return x.jsx(o.Provider,{value:a,children:l})}function c(i){const l=r.useContext(o);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return n.displayName=e+"Provider",[n,c]}function k(e,t=[]){let o=[];function n(i,l){const f=r.createContext(l),a=o.length;o=[...o,l];function s(d){const{scope:v,children:m,...u}=d,C=(v==null?void 0:v[e][a])||f,S=r.useMemo(()=>u,Object.values(u));return x.jsx(C.Provider,{value:S,children:m})}function I(d,v){const m=(v==null?void 0:v[e][a])||f,u=r.useContext(m);if(u)return u;if(l!==void 0)return l;throw new Error(`\`${d}\` must be used within \`${i}\``)}return s.displayName=i+"Provider",[s,I]}const c=()=>{const i=o.map(l=>r.createContext(l));return function(f){const a=(f==null?void 0:f[e])||i;return r.useMemo(()=>({[`__scope${e}`]:{...f,[e]:a}}),[f,a])}};return c.scopeName=e,[n,H(c,...t)]}function H(...e){const t=e[0];if(e.length===1)return t;const o=()=>{const n=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(i){const l=n.reduce((f,{useScope:a,scopeName:s})=>{const d=a(i)[`__scope${s}`];return{...f,...d}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return o.scopeName=t.scopeName,o}function D(e){const t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>(...o)=>{var n;return(n=t.current)==null?void 0:n.call(t,...o)},[])}var _=globalThis!=null&&globalThis.document?r.useLayoutEffect:()=>{},ee=X.useId||(()=>{}),te=0;function ne(e){const[t,o]=r.useState(ee());return _(()=>{e||o(n=>n??String(te++))},[e]),e||(t?`radix-${t}`:"")}function oe(e,t){return r.useReducer((o,n)=>t[o][n]??o,e)}var re=e=>{const{present:t,children:o}=e,n=se(t),c=typeof o=="function"?o({present:n.isPresent}):r.Children.only(o),i=M(n.ref,ce(c));return typeof o=="function"||n.isPresent?r.cloneElement(c,{ref:i}):null};re.displayName="Presence";function se(e){const[t,o]=r.useState(),n=r.useRef({}),c=r.useRef(e),i=r.useRef("none"),l=e?"mounted":"unmounted",[f,a]=oe(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const s=P(n.current);i.current=f==="mounted"?s:"none"},[f]),_(()=>{const s=n.current,I=c.current;if(I!==e){const v=i.current,m=P(s);e?a("MOUNT"):m==="none"||(s==null?void 0:s.display)==="none"?a("UNMOUNT"):a(I&&v!==m?"ANIMATION_OUT":"UNMOUNT"),c.current=e}},[e,a]),_(()=>{if(t){const s=d=>{const m=P(n.current).includes(d.animationName);d.target===t&&m&&Z.flushSync(()=>a("ANIMATION_END"))},I=d=>{d.target===t&&(i.current=P(n.current))};return t.addEventListener("animationstart",I),t.addEventListener("animationcancel",s),t.addEventListener("animationend",s),()=>{t.removeEventListener("animationstart",I),t.removeEventListener("animationcancel",s),t.removeEventListener("animationend",s)}}else a("ANIMATION_END")},[t,a]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:r.useCallback(s=>{s&&(n.current=getComputedStyle(s)),o(s)},[])}}function P(e){return(e==null?void 0:e.animationName)||"none"}function ce(e){var n,c;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,o=t&&"isReactWarning"in t&&t.isReactWarning;return o?e.ref:(t=(c=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:c.get,o=t&&"isReactWarning"in t&&t.isReactWarning,o?e.props.ref:e.props.ref||e.ref)}function ue({prop:e,defaultProp:t,onChange:o=()=>{}}){const[n,c]=ie({defaultProp:t,onChange:o}),i=e!==void 0,l=i?e:n,f=D(o),a=r.useCallback(s=>{if(i){const d=typeof s=="function"?s(e):s;d!==e&&f(d)}else c(s)},[i,e,c,f]);return[l,a]}function ie({defaultProp:e,onChange:t}){const o=r.useState(e),[n]=o,c=r.useRef(n),i=D(t);return r.useEffect(()=>{c.current!==n&&(i(n),c.current=n)},[n,c,i]),o}function ae(e){const t=e+"CollectionProvider",[o,n]=k(t),[c,i]=o(t,{collectionRef:{current:null},itemMap:new Map}),l=m=>{const{scope:u,children:C}=m,S=E.useRef(null),p=E.useRef(new Map).current;return x.jsx(c,{scope:u,itemMap:p,collectionRef:S,children:C})};l.displayName=t;const f=e+"CollectionSlot",a=E.forwardRef((m,u)=>{const{scope:C,children:S}=m,p=i(f,C),R=M(u,p.collectionRef);return x.jsx(j,{ref:R,children:S})});a.displayName=f;const s=e+"CollectionItemSlot",I="data-radix-collection-item",d=E.forwardRef((m,u)=>{const{scope:C,children:S,...p}=m,R=E.useRef(null),A=M(u,R),b=i(s,C);return E.useEffect(()=>(b.itemMap.set(R,{ref:R,...p}),()=>void b.itemMap.delete(R))),x.jsx(j,{[I]:"",ref:A,children:S})});d.displayName=s;function v(m){const u=i(e+"CollectionConsumer",m);return E.useCallback(()=>{const S=u.collectionRef.current;if(!S)return[];const p=Array.from(S.querySelectorAll(`[${I}]`));return Array.from(u.itemMap.values()).sort((b,h)=>p.indexOf(b.ref.current)-p.indexOf(h.ref.current))},[u.collectionRef,u.itemMap])}return[{Provider:l,Slot:a,ItemSlot:d},v,n]}var le=r.createContext(void 0);function fe(e){const t=r.useContext(le);return e||t||"ltr"}var O="rovingFocusGroup.onEntryFocus",de={bubbles:!1,cancelable:!0},w="RovingFocusGroup",[y,K,me]=ae(w),[pe,Te]=k(w,[me]),[ve,Ce]=pe(w),$=r.forwardRef((e,t)=>x.jsx(y.Provider,{scope:e.__scopeRovingFocusGroup,children:x.jsx(y.Slot,{scope:e.__scopeRovingFocusGroup,children:x.jsx(Re,{...e,ref:t})})}));$.displayName=w;var Re=r.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,orientation:n,loop:c=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:a,onEntryFocus:s,preventScrollOnEntryFocus:I=!1,...d}=e,v=r.useRef(null),m=M(t,v),u=fe(i),[C=null,S]=ue({prop:l,defaultProp:f,onChange:a}),[p,R]=r.useState(!1),A=D(s),b=K(o),h=r.useRef(!1),[V,U]=r.useState(0);return r.useEffect(()=>{const g=v.current;if(g)return g.addEventListener(O,A),()=>g.removeEventListener(O,A)},[A]),x.jsx(ve,{scope:o,orientation:n,dir:u,loop:c,currentTabStopId:C,onItemFocus:r.useCallback(g=>S(g),[S]),onItemShiftTab:r.useCallback(()=>R(!0),[]),onFocusableItemAdd:r.useCallback(()=>U(g=>g+1),[]),onFocusableItemRemove:r.useCallback(()=>U(g=>g-1),[]),children:x.jsx(G.div,{tabIndex:p||V===0?-1:0,"data-orientation":n,...d,ref:m,style:{outline:"none",...e.style},onMouseDown:T(e.onMouseDown,()=>{h.current=!0}),onFocus:T(e.onFocus,g=>{const q=!h.current;if(g.target===g.currentTarget&&q&&!p){const L=new CustomEvent(O,de);if(g.currentTarget.dispatchEvent(L),!L.defaultPrevented){const F=b().filter(N=>N.focusable),z=F.find(N=>N.active),J=F.find(N=>N.id===C),Q=[z,J,...F].filter(Boolean).map(N=>N.ref.current);Y(Q,I)}}h.current=!1}),onBlur:T(e.onBlur,()=>R(!1))})})}),B="RovingFocusGroupItem",W=r.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,focusable:n=!0,active:c=!1,tabStopId:i,...l}=e,f=ne(),a=i||f,s=Ce(B,o),I=s.currentTabStopId===a,d=K(o),{onFocusableItemAdd:v,onFocusableItemRemove:m}=s;return r.useEffect(()=>{if(n)return v(),()=>m()},[n,v,m]),x.jsx(y.ItemSlot,{scope:o,id:a,focusable:n,active:c,children:x.jsx(G.span,{tabIndex:I?0:-1,"data-orientation":s.orientation,...l,ref:t,onMouseDown:T(e.onMouseDown,u=>{n?s.onItemFocus(a):u.preventDefault()}),onFocus:T(e.onFocus,()=>s.onItemFocus(a)),onKeyDown:T(e.onKeyDown,u=>{if(u.key==="Tab"&&u.shiftKey){s.onItemShiftTab();return}if(u.target!==u.currentTarget)return;const C=ge(u,s.orientation,s.dir);if(C!==void 0){if(u.metaKey||u.ctrlKey||u.altKey||u.shiftKey)return;u.preventDefault();let p=d().filter(R=>R.focusable).map(R=>R.ref.current);if(C==="last")p.reverse();else if(C==="prev"||C==="next"){C==="prev"&&p.reverse();const R=p.indexOf(u.currentTarget);p=s.loop?xe(p,R+1):p.slice(R+1)}setTimeout(()=>Y(p))}})})})});W.displayName=B;var Ie={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Se(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ge(e,t,o){const n=Se(e.key,o);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Ie[n]}function Y(e,t=!1){const o=document.activeElement;for(const n of e)if(n===o||(n.focus({preventScroll:t}),document.activeElement!==o))return}function xe(e,t){return e.map((o,n)=>e[(t+n)%e.length])}var he=$,Pe=W;export{Pe as I,re as P,he as R,T as a,ue as b,k as c,Te as d,fe as e,D as f,_ as g,ae as h,be as i,ne as u};
